# Определяем последовательность этапов пайплайна
stages:
  - build
  - test

# Этап сборки
build-job:
  stage: build
  image: python:3.11
  script:
    - echo "Installing dependencies"
    - pip install -r requirements.txt || true   # если файла нет – не упадёт
    - echo "Build complete"
  artifacts:
    paths:
      - ./
    expire_in: 1 hour

# Этап тестирования
test-job:
  stage: test
  image: python:3.11
  script:
    - pip install pytest
    - pytest -q
